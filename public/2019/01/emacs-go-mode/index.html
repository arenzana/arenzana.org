<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Emacs Go Mode - Arenzana</title><link rel="icon" type="image/png" href="/Arenzanafav.png" />

	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta property="og:title" content="Emacs Go Mode" />
<meta property="og:description" content="You will notice how much I use “me” and “I” on this post. This because your emacs configuration is extremely personal." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://arenzana.org/2019/01/emacs-go-mode/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-01-21T20:55:00+00:00" />
<meta property="article:modified_time" content="2019-01-21T20:55:00+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Emacs Go Mode"/>
<meta name="twitter:description" content="You will notice how much I use “me” and “I” on this post. This because your emacs configuration is extremely personal."/>


	<link rel="stylesheet" type="text/css" media="screen" href="https://arenzana.org/css/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://arenzana.org/css/main.css" /><link rel="stylesheet" type="text/css" href="https://arenzana.org/css/dark.css" media="(prefers-color-scheme: dark)" />

	<script src="https://arenzana.org/js/feather.min.js"></script>
	<script src="https://arenzana.org/js/main.js"></script>
</head>

<body>
	<div class="container wrapper post">
		<div class="header">
	<base href="https://arenzana.org/">
    <link href="https://social.mrcol.es/@isma" rel="me">
	<h1 class="site-title"><a href="https://arenzana.org/">Arenzana</a></h1>
	<div class="site-description"><h2></h2><nav class="nav social">
			<ul class="flat"><a href="https://github.com/arenzana" title="Code"><i data-feather="code"></i></a><a href="/index.xml" title="RSS"><i data-feather="rss"></i></a></ul>
		</nav>
	</div>

	<nav class="nav">
		<ul class="flat">
			
			<li>
				<a href="/">home</a>
			</li>
			
			<li>
				<a href="/posts">blog</a>
			</li>
			
			<li>
				<a href="https://iarenzana.gitlab.io/cv/exec_en.html">CV</a>
			</li>
			
		</ul>
	</nav>
</div>


		<div class="post-header">
			<h1 class="title">Emacs Go Mode</h1>
			<div class="meta">Posted at &mdash; Jan 21, 2019</div>
		</div>

		<div class="markdown">
			<p>You will notice how much I use “me” and “I” on this post. This because your emacs configuration is extremely personal. You are creating a “dream editor”, and the options that I pick might not be of your preference. Feel free to make it your own!</p>
<p>Back on topic. I started writing Go in late 2015. At first, I used <a href="https://www.sublimetext.com/">Sublime Text</a>, which I like a lot, but I was a little jealous of those using <a href="https://github.com/fatih/vim-go">vim-go</a> and I figured there would be a way to make myself at home writing Go in Emacs. This is how the adventure began.</p>
<h2 id="find-a-mode">Find a Mode!</h2>
<p>The first thing I had to do was find a major mode for Go on emacs. It didn’t take me long to find <a href="%22https://github.com/dominikh/go-mode.el%22">go-mode</a>. Installation is not hard, as it’s available as a package in the MELPA repository. A simple <code>M-x package-install go-mode</code> sufficed. Configuring it was a bit harder.</p>
<h2 id="configuration">Configuration</h2>
<h2 id="this-is-my-emacs-configuration-for-go">This is my <code>.emacs</code> configuration for Go.</h2>
<pre><code>&lt;/p&gt;
</code></pre>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lisp" data-lang="lisp"><span style="display:flex;"><span><span style="color:#586e75">;;Load Go-specific language syntax</span>
</span></span><span style="display:flex;"><span><span style="color:#586e75">;;For gocode use https://github.com/mdempsky/gocode</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#586e75">;;Custom Compile Command</span>
</span></span><span style="display:flex;"><span>(<span style="color:#b58900">defun</span> <span style="color:#268bd2">go-mode-setup</span> ()
</span></span><span style="display:flex;"><span>  (<span style="color:#268bd2">linum-mode</span> <span style="color:#2aa198">1</span>)
</span></span><span style="display:flex;"><span>  (<span style="color:#268bd2">go-eldoc-setup</span>)
</span></span><span style="display:flex;"><span>  (<span style="color:#719e07">setq</span> <span style="color:#268bd2">gofmt-command</span> <span style="color:#2aa198">&#34;goimports&#34;</span>)
</span></span><span style="display:flex;"><span>  (<span style="color:#268bd2">add-hook</span> <span style="color:#2aa198">&#39;before-save-hook</span> <span style="color:#2aa198">&#39;gofmt-before-save</span>)
</span></span><span style="display:flex;"><span>  (<span style="color:#268bd2">local-set-key</span> (<span style="color:#268bd2">kbd</span> <span style="color:#2aa198">&#34;M-.&#34;</span>) <span style="color:#2aa198">&#39;godef-jump</span>)
</span></span><span style="display:flex;"><span>  (<span style="color:#719e07">setq</span> <span style="color:#268bd2">compile-command</span> <span style="color:#2aa198">&#34;echo Building... &amp;&amp; go build -v &amp;&amp; echo Testing... &amp;&amp; go test -v &amp;&amp; echo Linter... &amp;&amp; golint&#34;</span>)
</span></span><span style="display:flex;"><span>  (<span style="color:#719e07">setq</span> <span style="color:#268bd2">compilation-read-command</span> <span style="color:#cb4b16">nil</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#586e75">;;  (define-key (current-local-map) &#34;\C-c\C-c&#34; &#39;compile)</span>
</span></span><span style="display:flex;"><span>  (<span style="color:#268bd2">local-set-key</span> (<span style="color:#268bd2">kbd</span> <span style="color:#2aa198">&#34;M-,&#34;</span>) <span style="color:#2aa198">&#39;compile</span>)
</span></span><span style="display:flex;"><span>(<span style="color:#268bd2">add-hook</span> <span style="color:#2aa198">&#39;go-mode-hook</span> <span style="color:#2aa198">&#39;go-mode-setup</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#586e75">;;Load auto-complete</span>
</span></span><span style="display:flex;"><span>(<span style="color:#268bd2">ac-config-default</span>)
</span></span><span style="display:flex;"><span>(<span style="color:#268bd2">require</span> <span style="color:#2aa198">&#39;auto-complete-config</span>)
</span></span><span style="display:flex;"><span>(<span style="color:#268bd2">require</span> <span style="color:#2aa198">&#39;go-autocomplete</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#586e75">;;Go rename</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(<span style="color:#268bd2">require</span> <span style="color:#2aa198">&#39;go-rename</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#586e75">;;Configure golint</span>
</span></span><span style="display:flex;"><span>(<span style="color:#268bd2">add-to-list</span> <span style="color:#2aa198">&#39;load-path</span> (<span style="color:#268bd2">concat</span> (<span style="color:#268bd2">getenv</span> <span style="color:#2aa198">&#34;GOPATH&#34;</span>)  <span style="color:#2aa198">&#34;/src/github.com/golang/lint/misc/emacs&#34;</span>))
</span></span><span style="display:flex;"><span>(<span style="color:#268bd2">require</span> <span style="color:#2aa198">&#39;golint</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#586e75">;;Smaller compilation buffer</span>
</span></span><span style="display:flex;"><span>(<span style="color:#719e07">setq</span> <span style="color:#268bd2">compilation-window-height</span> <span style="color:#2aa198">14</span>)
</span></span><span style="display:flex;"><span>(<span style="color:#b58900">defun</span> <span style="color:#268bd2">my-compilation-hook</span> ()
</span></span><span style="display:flex;"><span>  (<span style="color:#b58900">when</span> (<span style="color:#268bd2">not</span> (<span style="color:#268bd2">get-buffer-window</span> <span style="color:#2aa198">&#34;*compilation*&#34;</span>))
</span></span><span style="display:flex;"><span>    (<span style="color:#268bd2">save-selected-window</span>
</span></span><span style="display:flex;"><span>      (<span style="color:#268bd2">save-excursion</span>
</span></span><span style="display:flex;"><span>        (<span style="color:#719e07">let*</span> ((<span style="color:#268bd2">w</span> (<span style="color:#268bd2">split-window-vertically</span>))
</span></span><span style="display:flex;"><span>               (<span style="color:#268bd2">h</span> (<span style="color:#268bd2">window-height</span> <span style="color:#268bd2">w</span>)))
</span></span><span style="display:flex;"><span>          (<span style="color:#268bd2">select-window</span> <span style="color:#268bd2">w</span>)
</span></span><span style="display:flex;"><span>          (<span style="color:#268bd2">switch-to-buffer</span> <span style="color:#2aa198">&#34;*compilation*&#34;</span>)
</span></span><span style="display:flex;"><span>          (<span style="color:#268bd2">shrink-window</span> (<span style="color:#268bd2">-</span> <span style="color:#268bd2">h</span> <span style="color:#268bd2">compilation-window-height</span>)))))))
</span></span><span style="display:flex;"><span>(<span style="color:#268bd2">add-hook</span> <span style="color:#2aa198">&#39;compilation-mode-hook</span> <span style="color:#2aa198">&#39;my-compilation-hook</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#586e75">;;Other Key bindings</span>
</span></span><span style="display:flex;"><span>(<span style="color:#268bd2">global-set-key</span> (<span style="color:#268bd2">kbd</span> <span style="color:#2aa198">&#34;C-c C-c&#34;</span>) <span style="color:#2aa198">&#39;comment-or-uncomment-region</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#586e75">;;Compilation autoscroll</span>
</span></span><span style="display:flex;"><span>(<span style="color:#719e07">setq</span> <span style="color:#268bd2">compilation-scroll-output</span> <span style="color:#cb4b16">t</span>)</span></span></code></pre></div>
<h2 id="the-basics">The Basics</h2>
<p>That’s a lot! Yeah, I know, but before you freak out, I’ll give you a run down of what each block is for (although the comments should help a lot).</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lisp" data-lang="lisp"><span style="display:flex;"><span><span style="color:#586e75">;;Load Go-specific language syntax</span>
</span></span><span style="display:flex;"><span><span style="color:#586e75">;;For gocode use https://github.com/mdempsky/gocode</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#586e75">;;Goimports</span>
</span></span><span style="display:flex;"><span>(<span style="color:#b58900">defun</span> <span style="color:#268bd2">go-mode-setup</span> ()
</span></span><span style="display:flex;"><span>  (<span style="color:#268bd2">go-eldoc-setup</span>)
</span></span><span style="display:flex;"><span>  (<span style="color:#268bd2">add-hook</span> <span style="color:#2aa198">&#39;before-save-hook</span> <span style="color:#2aa198">&#39;gofmt-before-save</span>)) 
</span></span><span style="display:flex;"><span>  (<span style="color:#719e07">setq</span> <span style="color:#268bd2">gofmt-command</span> <span style="color:#2aa198">&#34;goimports&#34;</span>)
</span></span><span style="display:flex;"><span>  (<span style="color:#268bd2">add-hook</span> <span style="color:#2aa198">&#39;before-save-hook</span> <span style="color:#2aa198">&#39;gofmt-before-save</span>))
</span></span><span style="display:flex;"><span>(<span style="color:#268bd2">add-hook</span> <span style="color:#2aa198">&#39;go-mode-hook</span> <span style="color:#2aa198">&#39;go-mode-setup</span>)</span></span></code></pre></div>
<p>This block enables <code>go-mode</code> and makes sure it runs <code>gofmt</code> before saving. <code>gofmt</code> allows our code to be nice and tidy and to let <code>go-mode</code> take care of importing the required packages. Nifty, huh? Makes coding nicer.</p>
<h2 id="making-life-even-easier">Making life even easier</h2>
<p>Some extra elements to make our lives easier. Not necessary, but nice to have.</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lisp" data-lang="lisp"><span style="display:flex;"><span> (<span style="color:#b58900">defun</span> <span style="color:#268bd2">go-mode-setup</span> ()
</span></span><span style="display:flex;"><span>  <span style="color:#586e75">;;  (setq compile-command &#34;go build -v &amp;&amp; go test -v &amp;&amp; go vet &amp;&amp; golint &amp;&amp; errcheck&#34;)</span>
</span></span><span style="display:flex;"><span>  (<span style="color:#268bd2">linum-mode</span> <span style="color:#2aa198">1</span>)
</span></span><span style="display:flex;"><span>  (<span style="color:#719e07">setq</span> <span style="color:#268bd2">compile-command</span> <span style="color:#2aa198">&#34;echo Building... &amp;&amp; go build -v &amp;&amp; echo Testing... &amp;&amp; go test -v &amp;&amp; echo Linter... &amp;&amp; golint&#34;</span>)
</span></span><span style="display:flex;"><span>  (<span style="color:#719e07">setq</span> <span style="color:#268bd2">compilation-read-command</span> <span style="color:#cb4b16">nil</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#586e75">;;  (define-key (current-local-map) &#34;\C-c\C-c&#34; &#39;compile)</span>
</span></span><span style="display:flex;"><span>  (<span style="color:#268bd2">local-set-key</span> (<span style="color:#268bd2">kbd</span> <span style="color:#2aa198">&#34;M-,&#34;</span>) <span style="color:#2aa198">&#39;compile</span>)
</span></span><span style="display:flex;"><span>(<span style="color:#268bd2">add-hook</span> <span style="color:#2aa198">&#39;go-mode-hook</span> <span style="color:#2aa198">&#39;go-mode-setup</span>)</span></span></code></pre></div>
<p>This is a good one. Here I’m configuring <code>M-,</code> (Escape key + comma) to run <code>go build</code>, <code>go test</code>, and <code>golint</code>. Extremely simple way make sure our code compiles.</p>
<h2 id="autocomplete-and-linting">Autocomplete and Linting</h2>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lisp" data-lang="lisp"><span style="display:flex;"><span><span style="color:#586e75">;;Load auto-complete</span>
</span></span><span style="display:flex;"><span>(<span style="color:#268bd2">ac-config-default</span>)
</span></span><span style="display:flex;"><span>(<span style="color:#268bd2">require</span> <span style="color:#2aa198">&#39;auto-complete-config</span>)
</span></span><span style="display:flex;"><span>(<span style="color:#268bd2">require</span> <span style="color:#2aa198">&#39;go-autocomplete</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#586e75">;;Go rename</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(<span style="color:#268bd2">require</span> <span style="color:#2aa198">&#39;go-rename</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#586e75">;;Configure golint</span>
</span></span><span style="display:flex;"><span>(<span style="color:#268bd2">add-to-list</span> <span style="color:#2aa198">&#39;load-path</span> (<span style="color:#268bd2">concat</span> (<span style="color:#268bd2">getenv</span> <span style="color:#2aa198">&#34;GOPATH&#34;</span>)  <span style="color:#2aa198">&#34;/src/github.com/golang/lint/misc/emacs&#34;</span>))
</span></span><span style="display:flex;"><span>(<span style="color:#268bd2">require</span> <span style="color:#2aa198">&#39;golint</span>)</span></span></code></pre></div>
<p>Sets up <code>go-autocomplete</code> and <code>go-rename</code>. <code>go-rename</code> only is used if you want to do project-level renames. Just between us, I barely use it.</p>
<p>The last block configures the path of the linter. Remember, Emacs is smart, but not <em>that</em> smart.</p>
<h2 id="beautify-our-editor">Beautify our editor</h2>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lisp" data-lang="lisp"><span style="display:flex;"><span><span style="color:#586e75">;;Smaller compilation buffer</span>
</span></span><span style="display:flex;"><span>(<span style="color:#719e07">setq</span> <span style="color:#268bd2">compilation-window-height</span> <span style="color:#2aa198">14</span>)
</span></span><span style="display:flex;"><span>(<span style="color:#b58900">defun</span> <span style="color:#268bd2">my-compilation-hook</span> ()
</span></span><span style="display:flex;"><span>  (<span style="color:#b58900">when</span> (<span style="color:#268bd2">not</span> (<span style="color:#268bd2">get-buffer-window</span> <span style="color:#2aa198">&#34;*compilation*&#34;</span>))
</span></span><span style="display:flex;"><span>    (<span style="color:#268bd2">save-selected-window</span>
</span></span><span style="display:flex;"><span>      (<span style="color:#268bd2">save-excursion</span>
</span></span><span style="display:flex;"><span>        (<span style="color:#719e07">let*</span> ((<span style="color:#268bd2">w</span> (<span style="color:#268bd2">split-window-vertically</span>))
</span></span><span style="display:flex;"><span>               (<span style="color:#268bd2">h</span> (<span style="color:#268bd2">window-height</span> <span style="color:#268bd2">w</span>)))
</span></span><span style="display:flex;"><span>          (<span style="color:#268bd2">select-window</span> <span style="color:#268bd2">w</span>)
</span></span><span style="display:flex;"><span>          (<span style="color:#268bd2">switch-to-buffer</span> <span style="color:#2aa198">&#34;*compilation*&#34;</span>)
</span></span><span style="display:flex;"><span>          (<span style="color:#268bd2">shrink-window</span> (<span style="color:#268bd2">-</span> <span style="color:#268bd2">h</span> <span style="color:#268bd2">compilation-window-height</span>)))))))
</span></span><span style="display:flex;"><span>(<span style="color:#268bd2">add-hook</span> <span style="color:#2aa198">&#39;compilation-mode-hook</span> <span style="color:#2aa198">&#39;my-compilation-hook</span>)</span></span></code></pre></div>
<p>All of this to make the compilation buffer smaller than a default buffer.</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lisp" data-lang="lisp"><span style="display:flex;"><span><span style="color:#586e75">;;Other Key bindings</span>
</span></span><span style="display:flex;"><span>(<span style="color:#268bd2">global-set-key</span> (<span style="color:#268bd2">kbd</span> <span style="color:#2aa198">&#34;C-c C-c&#34;</span>) <span style="color:#2aa198">&#39;comment-or-uncomment-region</span>)</span></span></code></pre></div>
<p>How about a simple command to comment out big blocks of code? <code>C-c C-c</code>. Also, <code>compilation-scroll-output</code> simply scrolls the compilation buffer all the way to the end.</p>
<h2 id="whats-left">What&rsquo;s Left</h2>
<p>This is my current set up. It works really well for my needs, but it might not be yours. Something I’ll work on is to integrate <code>delve</code> (golang debugger) into the editor, but I suppose I’m quite old school.</p>
<p>I also have <a href="%22https://magit.vc/%22">Magit</a> integrated into my workflow, but that’s a topic for a different episode. To be honest, I don’t miss anything from Sublime (or Atom or MS Code), plus it already makes use of my favorite editor. A simple <code>.emacs</code> file gives me all the customization that I need and I know I always have MY set up everywhere.</p>

		</div>

		<div class="post-tags">
			
				
					<nav class="nav tags">
							<ul class="flat">
								
								<li><a href="/tags/emacs">emacs</a></li>
								
								<li><a href="/tags/golang">golang</a></li>
								
								<li><a href="/tags/tech">tech</a></li>
								
							</ul>
					</nav>
				
			
		</div>
		</div>
	<div class="footer wrapper">
	<nav class="nav">
		<div>© 2023, Ismael Arenzana. All rights reserved. </div>
	</nav>
</div><script>feather.replace()</script>
</body>
</html>
